<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Pusher-Channels | Triniwiz {N} Plugin Docs</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="All the docs for the any of my {N} plugins">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/nativescript-plugins/assets/css/0.styles.b9f07abe.css" as="style"><link rel="preload" href="/nativescript-plugins/assets/js/app.e3a02b5e.js" as="script"><link rel="preload" href="/nativescript-plugins/assets/js/2.ae51f4a3.js" as="script"><link rel="preload" href="/nativescript-plugins/assets/js/33.a36e5267.js" as="script"><link rel="prefetch" href="/nativescript-plugins/assets/js/10.44b282ff.js"><link rel="prefetch" href="/nativescript-plugins/assets/js/11.0ad47660.js"><link rel="prefetch" href="/nativescript-plugins/assets/js/12.c838a41a.js"><link rel="prefetch" href="/nativescript-plugins/assets/js/13.d028ec8c.js"><link rel="prefetch" href="/nativescript-plugins/assets/js/14.61b3fccb.js"><link rel="prefetch" href="/nativescript-plugins/assets/js/15.6d67a130.js"><link rel="prefetch" href="/nativescript-plugins/assets/js/16.9efadaff.js"><link rel="prefetch" href="/nativescript-plugins/assets/js/17.318a5a07.js"><link rel="prefetch" href="/nativescript-plugins/assets/js/18.f714a28d.js"><link rel="prefetch" href="/nativescript-plugins/assets/js/19.213b76bf.js"><link rel="prefetch" href="/nativescript-plugins/assets/js/20.fd0be665.js"><link rel="prefetch" href="/nativescript-plugins/assets/js/21.23a2a7bb.js"><link rel="prefetch" href="/nativescript-plugins/assets/js/22.99afb279.js"><link rel="prefetch" href="/nativescript-plugins/assets/js/23.315592e6.js"><link rel="prefetch" href="/nativescript-plugins/assets/js/24.bc4d2d89.js"><link rel="prefetch" href="/nativescript-plugins/assets/js/25.7ff2d2ed.js"><link rel="prefetch" href="/nativescript-plugins/assets/js/26.a38acc99.js"><link rel="prefetch" href="/nativescript-plugins/assets/js/27.efa146c9.js"><link rel="prefetch" href="/nativescript-plugins/assets/js/28.cda0673f.js"><link rel="prefetch" href="/nativescript-plugins/assets/js/29.236367ed.js"><link rel="prefetch" href="/nativescript-plugins/assets/js/3.a2a14d01.js"><link rel="prefetch" href="/nativescript-plugins/assets/js/30.0ff1c04e.js"><link rel="prefetch" href="/nativescript-plugins/assets/js/31.0530767a.js"><link rel="prefetch" href="/nativescript-plugins/assets/js/32.4c642e05.js"><link rel="prefetch" href="/nativescript-plugins/assets/js/34.9f3b4bbc.js"><link rel="prefetch" href="/nativescript-plugins/assets/js/35.d9e3676c.js"><link rel="prefetch" href="/nativescript-plugins/assets/js/36.f32a431b.js"><link rel="prefetch" href="/nativescript-plugins/assets/js/37.2aeb4b9f.js"><link rel="prefetch" href="/nativescript-plugins/assets/js/38.3d45fbe6.js"><link rel="prefetch" href="/nativescript-plugins/assets/js/39.274546ee.js"><link rel="prefetch" href="/nativescript-plugins/assets/js/4.8fd817dd.js"><link rel="prefetch" href="/nativescript-plugins/assets/js/40.f11ad4e8.js"><link rel="prefetch" href="/nativescript-plugins/assets/js/41.50c0b132.js"><link rel="prefetch" href="/nativescript-plugins/assets/js/42.475eb67f.js"><link rel="prefetch" href="/nativescript-plugins/assets/js/43.2d14518d.js"><link rel="prefetch" href="/nativescript-plugins/assets/js/44.250bb974.js"><link rel="prefetch" href="/nativescript-plugins/assets/js/45.f09b80c4.js"><link rel="prefetch" href="/nativescript-plugins/assets/js/46.db7352d0.js"><link rel="prefetch" href="/nativescript-plugins/assets/js/47.fae12471.js"><link rel="prefetch" href="/nativescript-plugins/assets/js/48.e2df9e37.js"><link rel="prefetch" href="/nativescript-plugins/assets/js/49.2938b32b.js"><link rel="prefetch" href="/nativescript-plugins/assets/js/5.c0f13de0.js"><link rel="prefetch" href="/nativescript-plugins/assets/js/50.d0a2803b.js"><link rel="prefetch" href="/nativescript-plugins/assets/js/6.5b2a23cf.js"><link rel="prefetch" href="/nativescript-plugins/assets/js/7.c7d3b9cc.js"><link rel="prefetch" href="/nativescript-plugins/assets/js/8.d65c5be9.js"><link rel="prefetch" href="/nativescript-plugins/assets/js/9.205aa0d9.js">
    <link rel="stylesheet" href="/nativescript-plugins/assets/css/0.styles.b9f07abe.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/nativescript-plugins/" class="home-link router-link-active"><!----> <span class="site-name">Triniwiz {N} Plugin Docs</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/nativescript-plugins/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="/nativescript-plugins/api-reference/" class="nav-link router-link-active">
  API Reference
</a></div><div class="nav-item"><a href="https://github.com/triniwiz/nativescript-plugins" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://www.nativescript.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  NativeScript
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/nativescript-plugins/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="/nativescript-plugins/api-reference/" class="nav-link router-link-active">
  API Reference
</a></div><div class="nav-item"><a href="https://github.com/triniwiz/nativescript-plugins" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://www.nativescript.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  NativeScript
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>API Reference</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/nativescript-plugins/api-reference/" aria-current="page" class="sidebar-link">Introduction</a></li><li><a href="/nativescript-plugins/api-reference/accelerometer.html" class="sidebar-link">Accelerometer</a></li><li><a href="/nativescript-plugins/api-reference/accordion.html" class="sidebar-link">Accordion</a></li><li><a href="/nativescript-plugins/api-reference/autocomplete.html" class="sidebar-link">AutoComplete</a></li><li><a href="/nativescript-plugins/api-reference/awesome-loaders.html" class="sidebar-link">AwesomeLoaders</a></li><li><a href="/nativescript-plugins/api-reference/aws-sdk-core.html" class="sidebar-link">AWS-SDK-Core</a></li><li><a href="/nativescript-plugins/api-reference/aws-sdk-s3.html" class="sidebar-link">AWS-SDK-S3</a></li><li><a href="/nativescript-plugins/api-reference/couchbase.html" class="sidebar-link">CouchBase</a></li><li><a href="/nativescript-plugins/api-reference/downloader.html" class="sidebar-link">Downloader</a></li><li><a href="/nativescript-plugins/api-reference/fancy-camera.html" class="sidebar-link">FancyCamera</a></li><li><a href="/nativescript-plugins/api-reference/fancy-list-view.html" class="sidebar-link">Fancy Listview</a></li><li><a href="/nativescript-plugins/api-reference/ffmpeg.html" class="sidebar-link">FFMPEG</a></li><li><a href="/nativescript-plugins/api-reference/here.html" class="sidebar-link">Here</a></li><li><a href="/nativescript-plugins/api-reference/image-cache-it.html" class="sidebar-link">ImageCacheIt</a></li><li><a href="/nativescript-plugins/api-reference/image-zoom.html" class="sidebar-link">ImageZoom</a></li><li><a href="/nativescript-plugins/api-reference/imageoptimize.html" class="sidebar-link">ImageOptimize</a></li><li><a href="/nativescript-plugins/api-reference/mongo-stitch-core.html" class="sidebar-link">Mongo-Stitch-Core</a></li><li><a href="/nativescript-plugins/api-reference/mongo-stitch-services-mongodb-remote.html" class="sidebar-link">Mongo-Stitch-Services-Mongodb-Remote</a></li><li><a href="/nativescript-plugins/api-reference/nested-scrollview.html" class="sidebar-link">NestedScrollview</a></li><li><a href="/nativescript-plugins/api-reference/pager.html" class="sidebar-link">Pager</a></li><li><a href="/nativescript-plugins/api-reference/popover.html" class="sidebar-link">PopOver</a></li><li><a href="/nativescript-plugins/api-reference/pubnub.html" class="sidebar-link">Pubnub</a></li><li><a href="/nativescript-plugins/api-reference/pusher-beams.html" class="sidebar-link">Pusher-Beams</a></li><li><a href="/nativescript-plugins/api-reference/pusher-channels.html" aria-current="page" class="active sidebar-link">Pusher-Channels</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/nativescript-plugins/api-reference/pusher-channels.html#installation" class="sidebar-link">Installation</a></li><li class="sidebar-sub-header"><a href="/nativescript-plugins/api-reference/pusher-channels.html#initialization" class="sidebar-link">Initialization</a></li><li class="sidebar-sub-header"><a href="/nativescript-plugins/api-reference/pusher-channels.html#configuration" class="sidebar-link">Configuration</a></li><li class="sidebar-sub-header"><a href="/nativescript-plugins/api-reference/pusher-channels.html#connection" class="sidebar-link">Connection</a></li><li class="sidebar-sub-header"><a href="/nativescript-plugins/api-reference/pusher-channels.html#subscribing-to-channels" class="sidebar-link">Subscribing to channels</a></li><li class="sidebar-sub-header"><a href="/nativescript-plugins/api-reference/pusher-channels.html#unsubscribing-from-channels" class="sidebar-link">Unsubscribing from channels</a></li><li class="sidebar-sub-header"><a href="/nativescript-plugins/api-reference/pusher-channels.html#binding-to-events" class="sidebar-link">Binding to events</a></li><li class="sidebar-sub-header"><a href="/nativescript-plugins/api-reference/pusher-channels.html#default-events" class="sidebar-link">Default events</a></li><li class="sidebar-sub-header"><a href="/nativescript-plugins/api-reference/pusher-channels.html#connection-events" class="sidebar-link">Connection Events</a></li></ul></li><li><a href="/nativescript-plugins/api-reference/radar-io.html" class="sidebar-link">Radar-IO</a></li><li><a href="/nativescript-plugins/api-reference/sinch.html" class="sidebar-link">Sinch</a></li><li><a href="/nativescript-plugins/api-reference/socketio.html" class="sidebar-link">SocketIO</a></li><li><a href="/nativescript-plugins/api-reference/splashscreen.html" class="sidebar-link">Splashscreen</a></li><li><a href="/nativescript-plugins/api-reference/sse.html" class="sidebar-link">SSE</a></li><li><a href="/nativescript-plugins/api-reference/star-ratings.html" class="sidebar-link">Star-Ratings</a></li><li><a href="/nativescript-plugins/api-reference/stripe.html" class="sidebar-link">Stripe</a></li><li><a href="/nativescript-plugins/api-reference/toasty.html" class="sidebar-link">Toasty</a></li><li><a href="/nativescript-plugins/api-reference/tooltip.html" class="sidebar-link">ToolTip</a></li><li><a href="/nativescript-plugins/api-reference/twitter.html" class="sidebar-link">Twitter</a></li><li><a href="/nativescript-plugins/api-reference/video-editor.html" class="sidebar-link">Video-Editor</a></li><li><a href="/nativescript-plugins/api-reference/video-recorder.html" class="sidebar-link">VideoRecorder</a></li><li><a href="/nativescript-plugins/api-reference/webrtc.html" class="sidebar-link">WebRTC</a></li><li><a href="/nativescript-plugins/api-reference/yogalayout.html" class="sidebar-link">YogaLayout</a></li><li><a href="/nativescript-plugins/api-reference/youtube-player.html" class="sidebar-link">Youtube-Player</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="pusher-channels"><a href="#pusher-channels" class="header-anchor">#</a> Pusher-Channels</h1> <h2 id="installation"><a href="#installation" class="header-anchor">#</a> Installation</h2> <p><code>ns plugin add @triniwiz/nativescript-pusher-channels'</code></p> <h3 id="usage"><a href="#usage" class="header-anchor">#</a> Usage</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> TNSPusher <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@triniwiz/nativescript-pusher-channels'</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="initialization"><a href="#initialization" class="header-anchor">#</a> Initialization</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> socket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TNSPusher</span><span class="token punctuation">(</span><span class="token constant">APP_KEY</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  cluster<span class="token operator">:</span> <span class="token constant">APP_CLUSTER</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>You can get your <code>APP_KEY</code> and <code>APP_CLUSTER</code> from the <a href="https://dashboard.pusher.com/" target="_blank" rel="noopener noreferrer">Pusher Channels dashboard<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h2 id="configuration"><a href="#configuration" class="header-anchor">#</a> Configuration</h2> <p>There are a number of configuration parameters which can be set for the client, which can be passed as an object to the Pusher constructor, i.e.:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> socket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TNSPusher</span><span class="token punctuation">(</span><span class="token constant">APP_KEY</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  cluster<span class="token operator">:</span> <span class="token constant">APP_CLUSTER</span><span class="token punctuation">,</span>
  authEndpoint<span class="token operator">:</span> <span class="token string">'http://example.com/pusher/auth'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>For most users, there is little need to change these. See <a href="http://pusher.com/docs/client_api_guide/client_connect" target="_blank" rel="noopener noreferrer">client API guide<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> for more details.</p> <h4 id="authendpoint-string"><a href="#authendpoint-string" class="header-anchor">#</a> <code>authEndpoint</code> (String)</h4> <p>Endpoint on your server that will return the authentication signature needed for private and presence channels. Defaults to <code>'/pusher/auth'</code>.</p> <p>For more information see <a href="https://pusher.com/docs/authenticating_users" target="_blank" rel="noopener noreferrer">authenticating users<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h4 id="cluster-string"><a href="#cluster-string" class="header-anchor">#</a> <code>cluster</code> (String)</h4> <p>Specifies the cluster that pusher-js should connect to. <a href="https://pusher.com/docs/clusters" target="_blank" rel="noopener noreferrer">If you'd like to see a full list of our clusters, click here<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. If you do not specify a cluster, <code>mt1</code> will be used by default.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> socket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TNSPusher</span><span class="token punctuation">(</span><span class="token constant">APP_KEY</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  cluster<span class="token operator">:</span> <span class="token constant">APP_CLUSTER</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="activitytimeout-integer"><a href="#activitytimeout-integer" class="header-anchor">#</a> <code>activityTimeout</code> (Integer)</h4> <p>If there is no activity for this length of time (in milliseconds), the client will ping the server to check if the connection is still working. The default value is set by the server. Setting this value to be too low will result in unnecessary traffic.</p> <h4 id="pongtimeout-integer"><a href="#pongtimeout-integer" class="header-anchor">#</a> <code>pongTimeout</code> (Integer)</h4> <p>Time before the connection is terminated after a ping is sent to the server. Default is 30000 (30s). Low values will cause false disconnections, if latency is high.</p> <h2 id="connection"><a href="#connection" class="header-anchor">#</a> Connection</h2> <p>A connection to Pusher Channels is established by providing your <code>APP_KEY</code> and <code>APP_CLUSTER</code> to the constructor function:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> socket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TNSPusher</span><span class="token punctuation">(</span><span class="token constant">APP_KEY</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  cluster<span class="token operator">:</span> <span class="token constant">APP_CLUSTER</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>This returns a socket object which can then be used to subscribe to channels.</p> <p>One reason this connection might fail is your account being over its' limits. You can detect this in the client by binding to the <code>error</code> event on the <code>pusher.connection</code> object. For example:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> pusher <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TNSPusher</span><span class="token punctuation">(</span><span class="token string">'app_key'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
pusher<span class="token punctuation">.</span><span class="token function">connection</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span> <span class="token string">'error'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">err</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span> err<span class="token punctuation">.</span>error<span class="token punctuation">.</span>data<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token number">4004</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Over limit!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>You may disconnect again by invoking the <code>disconnect</code> method:</p> <div class="language-js extra-class"><pre class="language-js"><code>socket<span class="token punctuation">.</span><span class="token function">disconnect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="connection-states"><a href="#connection-states" class="header-anchor">#</a> Connection States</h3> <p>The connection can be in any one of these states.</p> <table><thead><tr><th><strong>State</strong></th> <th><strong>Note</strong></th></tr></thead> <tbody><tr><td>initialized</td> <td>Initial state. No event is emitted in this state.</td></tr> <tr><td>connecting</td> <td>All dependencies have been loaded and Channels is trying to connect. The connection will also enter this state when it is trying to reconnect after a connection failure.</td></tr> <tr><td>connected</td> <td>The connection to Channels is open and authenticated with your app.</td></tr> <tr><td>unavailable</td> <td>The connection is temporarily unavailable. In most cases this means that there is no internet connection. It could also mean that Channels is down</td></tr> <tr><td>failed</td> <td>Channels is not supported by the browser. This implies that WebSockets are not natively available and an HTTP-based transport could not be found.</td></tr> <tr><td>disconnected</td> <td>The Channels connection was previously connected and has now intentionally been closed.</td></tr></tbody></table> <h3 id="socket-ids"><a href="#socket-ids" class="header-anchor">#</a> Socket IDs</h3> <p>Making a connection provides the client with a new <code>socket_id</code> that is assigned by the server. This can be used to distinguish the client's own events. A change of state might otherwise be duplicated in the client. More information on this pattern is available <a href="http://pusherapp.com/docs/duplicates" target="_blank" rel="noopener noreferrer">here<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>It is also stored within the socket, and used as a token for generating signatures for private channels.</p> <h2 id="subscribing-to-channels"><a href="#subscribing-to-channels" class="header-anchor">#</a> Subscribing to channels</h2> <h3 id="public-channels"><a href="#public-channels" class="header-anchor">#</a> Public channels</h3> <p>The default method for subscribing to a channel involves invoking the <code>subscribe</code> method of your socket object:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> channel <span class="token operator">=</span> socket<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token string">'my-channel'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>This returns a Channel object which events can be bound to.</p> <h3 id="private-channels"><a href="#private-channels" class="header-anchor">#</a> Private channels</h3> <p>Private channels are created in exactly the same way as normal channels, except that they reside in the 'private-' namespace. This means prefixing the channel name:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> channel <span class="token operator">=</span> socket<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token string">'private-my-channel'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="unsubscribing-from-channels"><a href="#unsubscribing-from-channels" class="header-anchor">#</a> Unsubscribing from channels</h2> <p>To unsubscribe from a channel, invoke the <code>unsubscribe</code> method of your socket object:</p> <div class="language-js extra-class"><pre class="language-js"><code>socket<span class="token punctuation">.</span><span class="token function">unsubscribe</span><span class="token punctuation">(</span><span class="token string">'my-channel'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Unsubscribing from private channels is done in exactly the same way, just with the additional <code>private-</code> prefix:</p> <div class="language-js extra-class"><pre class="language-js"><code>socket<span class="token punctuation">.</span><span class="token function">unsubscribe</span><span class="token punctuation">(</span><span class="token string">'private-my-channel'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="binding-to-events"><a href="#binding-to-events" class="header-anchor">#</a> Binding to events</h2> <p>Event binding takes a very similar form to the way events are handled in jQuery. You can use the following methods either on a channel object, to bind to events on a particular channel; or on the pusher object, to bind to events on all subscribed channels simultaneously.</p> <h3 id="bind-and-unbind"><a href="#bind-and-unbind" class="header-anchor">#</a> <code>bind</code> and <code>unbind</code></h3> <p>Binding to &quot;new-message&quot; on channel: The following logs message data to the console when &quot;new-message&quot; is received</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">channel</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token string">'new-message'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>For client-events on presence channels, bound callbacks will be called with an additional argument. This argument is an object containing the <code>user_id</code> of the user who triggered the event</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">presenceChannel</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token string">'client-message'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data<span class="token punctuation">,</span> metadata</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'received data from'</span><span class="token punctuation">,</span> metadata<span class="token punctuation">.</span>user_id<span class="token punctuation">,</span> <span class="token string">':'</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Unsubscribe behaviour varies depending on which parameters you provide it with. For example:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Remove just `handler` for the `new-comment` event</span>
channel<span class="token punctuation">.</span><span class="token function">unbind</span><span class="token punctuation">(</span><span class="token string">'new-comment'</span><span class="token punctuation">,</span> handler<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Remove all handlers for the `new-comment` event</span>
channel<span class="token punctuation">.</span><span class="token function">unbind</span><span class="token punctuation">(</span><span class="token string">'new-comment'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Remove `handler` for all events</span>
channel<span class="token punctuation">.</span><span class="token function">unbind</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> handler<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Remove all handlers on `channel`</span>
channel<span class="token punctuation">.</span><span class="token function">unbind</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="unbind-all"><a href="#unbind-all" class="header-anchor">#</a> <code>unbind_all</code></h3> <p>The <code>unbind_all</code> method is equivalent to calling <code>unbind()</code> and <code>unbind_global()</code> together; it removes all bindings, global and event specific.</p> <h2 id="default-events"><a href="#default-events" class="header-anchor">#</a> Default events</h2> <p>There are a number of events which are used internally, but can also be of use elsewhere, for instance <code>subscribe</code>. There is also a <code>state_change</code> event - which fires whenever there is a state change. You can use it like this:</p> <div class="language-js extra-class"><pre class="language-js"><code>pusher<span class="token punctuation">.</span><span class="token function">connection</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token string">'state_change'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">states</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// states = {previous: 'oldState', current: 'newState'}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Channels current state is &quot;</span> <span class="token operator">+</span> states<span class="token punctuation">.</span>current<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="connection-events"><a href="#connection-events" class="header-anchor">#</a> Connection Events</h2> <p>To listen for when you connect to Pusher Channels:</p> <div class="language-js extra-class"><pre class="language-js"><code>socket<span class="token punctuation">.</span><span class="token function">connection</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token string">'connected'</span><span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>And to bind to disconnections:</p> <div class="language-js extra-class"><pre class="language-js"><code>socket<span class="token punctuation">.</span><span class="token function">connection</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token string">'disconnected'</span><span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">4/28/2021, 11:30:55 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/nativescript-plugins/api-reference/pusher-beams.html" class="prev">
        Pusher-Beams
      </a></span> <span class="next"><a href="/nativescript-plugins/api-reference/radar-io.html">
        Radar-IO
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/nativescript-plugins/assets/js/app.e3a02b5e.js" defer></script><script src="/nativescript-plugins/assets/js/2.ae51f4a3.js" defer></script><script src="/nativescript-plugins/assets/js/33.a36e5267.js" defer></script>
  </body>
</html>
